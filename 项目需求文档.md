# A股上市公司闪卡项目需求文档

## 📋 项目概述

### 项目名称
A股上市公司闪卡（WEB版响应式应用）

### 项目背景
开发一个WEB版的响应式A股5000多家上市公司闪卡应用，适配移动端和桌面端，核心功能是帮助投资者快速了解各个上市公司的基本面情况。

### 项目目标
- 为个人投资者和投资新手提供快速学习工具
- 通过闪卡形式展示公司基本面信息
- 支持随机浏览和收藏管理功能
- 提供财务指标的历史对比和同行业对比

---

## 🎯 目标用户

### 主要用户群体
1. **个人投资者**：需要快速了解市场上公司情况的散户投资者
2. **投资新手学习者**：希望系统学习了解A股市场公司的初学者

### 使用场景
- **学习了解市场上的公司**：用户通过闪卡形式快速浏览和学习各家上市公司的基本情况

---

## 🚀 核心功能需求

### 1. 闪卡浏览功能
- **随机刷卡模式**：完全随机展示公司，但不重复已浏览过的，服务器本地有JSON保存公司代码，随机抽取这些代码
- **左右滑动操作**：
  - 左滑：放弃该公司
  - 右滑：收藏该公司
- **重新洗牌功能**：清空收藏和放弃记录，重新开始浏览
- **进度跟踪**：显示已浏览过多少家公司

### 2. 双面卡片设计

#### 卡片正面信息
- 公司名称（最大字体显示）
- 公司Logo
- 股票代码 + 当前股价
- 涨跌幅（相对前一交易日，显示百分比）
- 市值（以亿元为单位）
- 股东数 + 单个股东持股金额
- GICS四级子行业（彩色标签显示）

#### 卡片反面信息
展示3个核心财务指标，每个指标包含：
- **ROE（净资产收益率）**
- **PE（市盈率）**
- **PB（市净比）**

每个指标显示格式：
```
指标名: 当前值 (历史对比值) 趋势箭头
[进度条显示] 超过X%同行业公司
```

### 3. 数据对比分析
- **历史纵向对比**：与过去5年数据对比（按年度数据，最新用TTM）
- **同行业横向对比**：与GICS四级子行业内公司对比
- **百分位显示**：如"ROE超过同行业75%的公司"
- **趋势指示**：
  - 红色向上箭头：指标上升
  - 绿色向下箭头：指标下降  
  - 黄色水平箭头：指标持平

### 4. 收藏管理功能
- **收藏列表**：一摞卡片的视觉效果，卡片叠放只露出边缘
- **收藏浏览**：点击后单张浏览收藏的公司
- **取消收藏**：在收藏列表中可以取消收藏
- **收藏统计**：显示收藏数量

### 5. 特殊情况处理
- **新上市公司**：历史数据不足5年的显示现有数据，特殊标识
- **小市值公司**：市值小于10亿的公司特殊标识
- **ST股票**：特殊标注显示
- **停牌股票**：显示"暂时停牌"并置灰处理
- **财务异常**：ROE超过100%或为负等异常数据直接提示异常

---

## 💻 技术架构

### 前端技术栈
- **框架**：原生HTML/CSS/JavaScript（轻量级方案）
- **响应式设计**：适配移动端和桌面端
- **本地存储**：LocalStorage存储用户数据（收藏、浏览记录等）
- **服务器存储**：JSON形式保存上市公司数据，24小时内无需重复访问TUSHARE

### 后端架构
- **服务器**：腾讯云部署
- **数据源**：Tushare API（Token: 36a2f0e1e23c2bab7ae3b70572db4b6e87157831c7b5a3d1cf8efe24）
- **缓存策略**：智能服务器缓存

### 数据存储方案

#### 智能缓存策略
```
用户A刷到A公司 → 服务器从Tushare获取 → 缓存到服务器JSON
用户B刷到A公司 → 直接从服务器JSON读取 → 快速响应
```

#### 缓存架构
- **用户数据**：LocalStorage（收藏列表、已浏览记录）
- **股票数据**：服务器服务器JSON（24小时TTL）
- **更新频率**：日更新，数据显示更新时间

#### 缓存优化
- **成本控制**：每只股票24小时内只调用一次Tushare API
- **热门预缓存**：根据访问频率预加载热门股票数据
- **缓存命中率**：目标达到80%以上

---

## 🎨 界面设计要求

### 整体布局
```
[顶部状态栏] - 已浏览数量、收藏数量、重新洗牌、收藏列表入口
[主卡片区域] - 占据大部分屏幕空间
[底部操作区] - 左滑右滑提示图标
```

### 响应式设计
- **手机竖屏**：卡片几乎全屏显示
- **手机横屏**：卡片居中显示，两侧留白
- **桌面端**：固定3:4宽高比，居中显示

### 视觉效果
- **卡片样式**：圆角、阴影效果、多巴胺配色
- **颜色系统**：
  - 涨跌：红涨绿跌（中国习惯）
  - 趋势：红色向上、绿色向下、黄色持平
- **动画效果**：丝滑的翻转和滑动动画

### 交互设计
- **卡片翻转**：点击卡片翻转查看正反面
- **滑动操作**：左右滑动进行收藏/放弃操作（PC WEB可以有按钮点击）
- **容错设计**：滑动距离阈值、误触撤销机制

---

## 📊 数据需求

### 基础数据
- **公司信息**：名称、代码、GICS行业分类、市值、股东数据、公司主营业务介绍
- **股价数据**：当前价格、涨跌幅（相对前一交易日）
- **财务数据**：ROE、PE、PB

### 对比数据
- **历史数据**：过去5年年度数据，最新TTM数据
- **同行业数据**：GICS四级子行业内公司数据用于横向对比
- **异常值处理**：市值过小、上市时间短的公司特殊标识

### 公司Logo获取
-  从 https://gushitong.baidu.com/stock/ab-001386 爬取公司官网Logo 
 

## 🔧 用户体验设计

### 首次使用引导
1. 显示第一张卡片
2. 高亮提示"点击翻转查看财务数据"
3. 用户翻转后，显示"左滑放弃，右滑收藏"
4. 完成一次滑动后，引导结束

### 错误处理
- **网络异常**：重试3次机制
- **数据加载失败**：弹出刷新重试提示
- **Loading效果**：数据加载时的动画效果

### 性能优化
- **预加载策略**：提前加载下几张卡片数据
- **图片优化**：Logo懒加载，默认占位图
- **缓存管理**：智能缓存过期和更新机制

---

## 💰 商业模式

### 变现方式
- **广告支持**：腾讯广点通
- **广告频率**：每浏览10-20张卡片随机显示一次广告
- **广告形式**：信息流广告，可伪装成"推荐股票"

### 备案要求
- **域名备案**：使用主域名备案，二级域名部署
- **广告资质**：申请腾讯广点通广告主资格

---

## 🚀 开发优先级

### MVP版本（第一阶段）
1. **基础闪卡展示** + 左右滑动操作
2. **收藏功能**
3. **基本的卡片正反面设计**

### V1.1版本（第二阶段）
1. **财务指标对比分析**
2. **用户引导系统**
3. **异常情况处理**

### V1.2版本（第三阶段）
1. **广告集成**
2. **性能优化**
3. **缓存策略完善**

### V1.3版本（第四阶段）
1. **用户行为统计**
2. **热门股票预缓存**
3. **更多视觉效果优化**

---

## 📈 技术实现细节

### API接口设计
```javascript
// 获取股票数据
GET /api/stock/{股票代码}

// 响应格式
{
  "code": "000001",
  "name": "平安银行", 
  "data": {
    "basic": {...},      // 基础信息
    "financial": {...},  // 财务数据
    "industry_compare": {...} // 行业对比
  },
  "cached_time": "2024-01-15 09:30:00",
  "from_cache": true
}
```

### 缓存监控
- **缓存命中率统计**
- **API调用次数监控**
- **成本控制机制**

### 数据更新策略
- **被动更新**：用户请求时发现过期才更新
- **主动更新**：每天凌晨批量更新热门股票
- **智能预热**：根据用户访问频率预加载数据

---

## 📝 项目里程碑

### 阶段一：架构搭建（1-2周）
- [ ] 前端基础框架搭建
- [ ] 后端API服务搭建
- [ ] Redis缓存服务配置
- [ ] Tushare数据接口对接

### 阶段二：核心功能（2-3周）
- [ ] 闪卡基础功能实现
- [ ] 滑动操作和动画效果
- [ ] 收藏功能实现
- [ ] 数据对比分析功能

### 阶段三：优化完善（1-2周）
- [ ] 用户引导系统
- [ ] 异常处理机制
- [ ] 性能优化
- [ ] 广告集成

### 阶段四：上线部署（1周）
- [ ] 腾讯云部署
- [ ] 域名备案和配置
- [ ] 广告平台对接
- [ ] 用户测试和反馈收集

---

## 🎯 成功指标

### 用户体验指标
- 页面加载速度 < 3秒
- 缓存命中率 > 80%
- 用户单次浏览卡片数 > 20张

### 技术指标
- API调用成本降低 > 90%
- 系统可用性 > 99%
- 移动端适配完美支持

### 商业指标
- 广告点击率 > 1%
- 用户留存率 > 30%
- 日活跃用户数持续增长

---

*文档版本：v1.0*  
*最后更新：2024年1月*  
*项目负责人：[您的姓名]*